{"ast":null,"code":"import _objectSpread from\"/Users/notAdmin/Documents/dev/DarkRiver/site/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/notAdmin/Documents/dev/DarkRiver/site/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/notAdmin/Documents/dev/DarkRiver/site/frontend/node_modules/@babel/runtime/regenerator/index.js\";import{Button,Card}from\"react-bootstrap\";import{Link,Navigate}from\"react-router-dom\";import Rating from\"./Rating\";import{Store}from\"../Store\";import{useContext}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Product(props){var _useContext=useContext(Store),state=_useContext.state,tba=_useContext.dispatch;var cart=state.cart;var addToCartHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var existItem,quantity,_yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:existItem=cart.cartItems.find(function(x){return x._id===product._id;});quantity=existItem?existItem.quantity+1:1;_context.next=4;return axios.get(\"/api/products/\".concat(product._id));case 4:_yield$axios$get=_context.sent;data=_yield$axios$get.data;if(!(data.countInStock<quantity)){_context.next=9;break;}window.alert(\"Sorry. Product is out of stock\");return _context.abrupt(\"return\");case 9:tba({type:\"CART_ADD_ITEM\",payload:_objectSpread(_objectSpread({},product),{},{quantity:quantity})});Navigate(\"/cart\");case 11:case\"end\":return _context.stop();}}},_callee);}));return function addToCartHandler(){return _ref.apply(this,arguments);};}();var product=props.product;return/*#__PURE__*/_jsxs(Card,{bg:\"dark\",className:\"prod-card\",children:[/*#__PURE__*/_jsx(Link,{to:\"/dp/\".concat(product.slug),children:/*#__PURE__*/_jsx(\"img\",{src:product.image,className:\"card-img-top\",alt:product.name})}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Link,{className:\"prodName\",to:\"/dp/\".concat(product.slug),children:[/*#__PURE__*/_jsx(Card.Title,{style:{fontSize:\"1em\"},children:product.name}),/*#__PURE__*/_jsx(Rating,{rating:product.rating,numRatings:product.numRatings}),/*#__PURE__*/_jsxs(Card.Text,{style:{color:\"white\"},children:[\"$\",product.price]})]}),/*#__PURE__*/_jsx(\"br\",{}),product.countInStock===0?/*#__PURE__*/_jsx(Button,{variant:\"light\",disabled:true,children:\"Out of stock\"}):/*#__PURE__*/_jsx(Button,{variant:\"yellow-black-txt\",onClick:function onClick(){return addToCartHandler(product);},children:\"Add to cart\"})]})]});}export default Product;","map":{"version":3,"names":["Button","Card","Link","Navigate","Rating","Store","useContext","axios","Product","props","state","tba","dispatch","cart","addToCartHandler","existItem","cartItems","find","x","_id","product","quantity","get","data","countInStock","window","alert","type","payload","slug","image","name","fontSize","rating","numRatings","color","price"],"sources":["/Users/notAdmin/Documents/dev/DarkRiver/site/frontend/src/components/Product.js"],"sourcesContent":["import { Button, Card } from \"react-bootstrap\";\nimport { Link, Navigate } from \"react-router-dom\";\nimport Rating from \"./Rating\";\nimport { Store } from \"../Store\";\nimport { useContext } from \"react\";\nimport axios from \"axios\";\n\nfunction Product(props) {\n  const { state, dispatch: tba } = useContext(Store);\n  const { cart } = state;\n  const addToCartHandler = async () => {\n    const existItem = cart.cartItems.find((x) => x._id === product._id);\n    const quantity = existItem ? existItem.quantity + 1 : 1;\n    const { data } = await axios.get(`/api/products/${product._id}`);\n    if (data.countInStock < quantity) {\n      window.alert(\"Sorry. Product is out of stock\");\n      return;\n    }\n    tba({\n      type: \"CART_ADD_ITEM\",\n      payload: { ...product, quantity },\n    });\n    Navigate(\"/cart\");\n  };\n  const { product } = props;\n  return (\n    <Card bg={\"dark\"} className=\"prod-card\">\n      <Link to={`/dp/${product.slug}`}>\n        <img src={product.image} className=\"card-img-top\" alt={product.name} />\n      </Link>\n      <Card.Body>\n        <Link className=\"prodName\" to={`/dp/${product.slug}`}>\n          <Card.Title style={{ fontSize: \"1em\" }}>{product.name}</Card.Title>\n          <Rating rating={product.rating} numRatings={product.numRatings} />\n          <Card.Text style={{ color: \"white\" }}>${product.price}</Card.Text>\n        </Link>\n        <br></br>\n        {product.countInStock === 0 ? (\n          <Button variant=\"light\" disabled>\n            Out of stock\n          </Button>\n        ) : (\n          <Button\n            variant=\"yellow-black-txt\"\n            onClick={() => addToCartHandler(product)}\n          >\n            Add to cart\n          </Button>\n        )}\n      </Card.Body>\n    </Card>\n  );\n}\nexport default Product;\n"],"mappings":"maAAA,OAASA,MAAT,CAAiBC,IAAjB,KAA6B,iBAA7B,CACA,OAASC,IAAT,CAAeC,QAAf,KAA+B,kBAA/B,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,OAASC,KAAT,KAAsB,UAAtB,CACA,OAASC,UAAT,KAA2B,OAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,QAASC,CAAAA,OAAT,CAAiBC,KAAjB,CAAwB,CACtB,gBAAiCH,UAAU,CAACD,KAAD,CAA3C,CAAQK,KAAR,aAAQA,KAAR,CAAyBC,GAAzB,aAAeC,QAAf,CACA,GAAQC,CAAAA,IAAR,CAAiBH,KAAjB,CAAQG,IAAR,CACA,GAAMC,CAAAA,gBAAgB,0FAAG,gLACjBC,SADiB,CACLF,IAAI,CAACG,SAAL,CAAeC,IAAf,CAAoB,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAACC,GAAF,GAAUC,OAAO,CAACD,GAAzB,EAApB,CADK,CAEjBE,QAFiB,CAENN,SAAS,CAAGA,SAAS,CAACM,QAAV,CAAqB,CAAxB,CAA4B,CAF/B,uBAGAd,CAAAA,KAAK,CAACe,GAAN,yBAA2BF,OAAO,CAACD,GAAnC,EAHA,uCAGfI,IAHe,kBAGfA,IAHe,MAInBA,IAAI,CAACC,YAAL,CAAoBH,QAJD,0BAKrBI,MAAM,CAACC,KAAP,CAAa,gCAAb,EALqB,wCAQvBf,GAAG,CAAC,CACFgB,IAAI,CAAE,eADJ,CAEFC,OAAO,gCAAOR,OAAP,MAAgBC,QAAQ,CAARA,QAAhB,EAFL,CAAD,CAAH,CAIAlB,QAAQ,CAAC,OAAD,CAAR,CAZuB,uDAAH,kBAAhBW,CAAAA,gBAAgB,0CAAtB,CAcA,GAAQM,CAAAA,OAAR,CAAoBX,KAApB,CAAQW,OAAR,CACA,mBACE,MAAC,IAAD,EAAM,EAAE,CAAE,MAAV,CAAkB,SAAS,CAAC,WAA5B,wBACE,KAAC,IAAD,EAAM,EAAE,eAASA,OAAO,CAACS,IAAjB,CAAR,uBACE,YAAK,GAAG,CAAET,OAAO,CAACU,KAAlB,CAAyB,SAAS,CAAC,cAAnC,CAAkD,GAAG,CAAEV,OAAO,CAACW,IAA/D,EADF,EADF,cAIE,MAAC,IAAD,CAAM,IAAN,yBACE,MAAC,IAAD,EAAM,SAAS,CAAC,UAAhB,CAA2B,EAAE,eAASX,OAAO,CAACS,IAAjB,CAA7B,wBACE,KAAC,IAAD,CAAM,KAAN,EAAY,KAAK,CAAE,CAAEG,QAAQ,CAAE,KAAZ,CAAnB,UAAyCZ,OAAO,CAACW,IAAjD,EADF,cAEE,KAAC,MAAD,EAAQ,MAAM,CAAEX,OAAO,CAACa,MAAxB,CAAgC,UAAU,CAAEb,OAAO,CAACc,UAApD,EAFF,cAGE,MAAC,IAAD,CAAM,IAAN,EAAW,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAT,CAAlB,eAAwCf,OAAO,CAACgB,KAAhD,GAHF,GADF,cAME,aANF,CAOGhB,OAAO,CAACI,YAAR,GAAyB,CAAzB,cACC,KAAC,MAAD,EAAQ,OAAO,CAAC,OAAhB,CAAwB,QAAQ,KAAhC,0BADD,cAKC,KAAC,MAAD,EACE,OAAO,CAAC,kBADV,CAEE,OAAO,CAAE,yBAAMV,CAAAA,gBAAgB,CAACM,OAAD,CAAtB,EAFX,yBAZJ,GAJF,GADF,CA2BD,CACD,cAAeZ,CAAAA,OAAf"},"metadata":{},"sourceType":"module"}