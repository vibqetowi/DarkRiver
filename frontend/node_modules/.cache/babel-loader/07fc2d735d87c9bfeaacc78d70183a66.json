{"ast":null,"code":"import _objectSpread from\"/Users/notAdmin/Documents/dev/DarkRiver/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/notAdmin/Documents/dev/DarkRiver/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/notAdmin/Documents/dev/DarkRiver/frontend/node_modules/@babel/runtime/regenerator/index.js\";import axios from\"axios\";import{useContext}from\"react\";import{Button,Card,Col,Container,ListGroup,ListGroupItem,Row}from\"react-bootstrap\";import{Helmet}from\"react-helmet-async\";import{Link,useNavigate}from\"react-router-dom\";import{Store}from\"../Store\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function CartPage(){var navigate=useNavigate();var _useContext=useContext(Store),state=_useContext.state,ctxDispatch=_useContext.dispatch;var cartItems=state.cart.cartItems;var updateCartHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(item,quantity){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/products/\".concat(item._id));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;if(!(data.countInStock<quantity)){_context.next=7;break;}window.alert(\"Sorry. Product is out of stock\");return _context.abrupt(\"return\");case 7:ctxDispatch({type:\"CART_ADD_ITEM\",payload:_objectSpread(_objectSpread({},item),{},{quantity:quantity})});case 8:case\"end\":return _context.stop();}}},_callee);}));return function updateCartHandler(_x,_x2){return _ref.apply(this,arguments);};}();var removeItemHandler=function removeItemHandler(item){ctxDispatch({type:\"CART_REMOVE_ITEM\",payload:item});};var checkoutHandler=function checkoutHandler(){navigate(\"/login?redirect=/shipping\");};var subtotal=cartItems.reduce(function(a,c){return a+c.price*c.quantity;},0);return/*#__PURE__*/_jsxs(Container,{className:\"rounded-border-black-bg\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Shopping Cart\"})}),/*#__PURE__*/_jsxs(Row,{style:{minHeight:\"400px\"},children:[/*#__PURE__*/_jsx(Col,{xl:8,className:\"black-bg\",children:cartItems.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"col2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"screen-500px-stack\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-page-left-left-div\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/images/shopNow.jpg\",className:\"shop-now-img\",alt:\"shop now\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-page-left-left-div\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Your DarkRiver Cart is empty \"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"amzn-link \",children:\"Shop today's deal\"})]})]})}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(ListGroup,{className:\"black-bg\",children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xl:6}),/*#__PURE__*/_jsxs(Col,{xl:6,children:[\" \",/*#__PURE__*/_jsx(\"h1\",{className:\"cart-page-h1-txt\",children:\"Shopping Cart\"})]})]}),cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{className:\"black-bg\",children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{xl:4,className:\"black-bg\",children:/*#__PURE__*/_jsxs(Link,{to:\"/dp/\".concat(item.slug),children:[\" \",/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"img-fluid rounded img-thumbnail\"})]})}),/*#__PURE__*/_jsxs(Col,{xl:5,children:[/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.slug),className:\"normal-ass-white-txt\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"one-line-parent\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"cart-page-txt\",children:[\" \",item.name]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(Link,{className:\"normal-ass-white-txt\",to:\"/seller/\".concat(item.brand),children:[\"sold by \",/*#__PURE__*/_jsx(\"p\",{className:\"amzn-link\",children:item.brand})]})}),/*#__PURE__*/_jsxs(\"p\",{className:\"cart-page-txt\",children:[\" $\",item.price]}),/*#__PURE__*/_jsxs(\"div\",{className:\"one-line-child\",children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return updateCartHandler(item,item.quantity-1);},variant:\"dark\",disabled:item.quantity===1,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus-circle\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"normal-ass-white-txt\",children:item.quantity}),\" \",/*#__PURE__*/_jsx(Button,{variant:\"dark\",onClick:function onClick(){return updateCartHandler(item,item.quantity+1);},disabled:item.quantity===item.countInStock,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-circle\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"one-line-child\",children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return removeItemHandler(item);},variant:\"black-bg-white-txt\",children:\"Delete\"})})]})]})]})},item._id);})]})})}),/*#__PURE__*/_jsx(Col,{xl:4,children:/*#__PURE__*/_jsx(Card,{className:\"black-bg\",children:/*#__PURE__*/_jsx(Card.Body,{children:cartItems.length===0?/*#__PURE__*/_jsx(\"div\",{}):/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{className:\"black-bg\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Subtotal (\",cartItems.reduce(function(a,c){return a+c.quantity;},0),\" \",\"items) : $\",subtotal]})]}),/*#__PURE__*/_jsx(ListGroupItem,{className:\"black-bg\",children:subtotal<35?/*#__PURE__*/_jsxs(\"p\",{children:[\"add $\",35-subtotal,\"\\xA0of items to get free shipping\"]}):/*#__PURE__*/_jsx(\"p\",{children:\" & free shipping\"})}),/*#__PURE__*/_jsx(ListGroup.Item,{className:\"black-bg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"yellow-black-txt\",onClick:checkoutHandler,children:\"Proceed to Checkout\"})})})]})})})})]})]});}","map":{"version":3,"names":["axios","useContext","Button","Card","Col","Container","ListGroup","ListGroupItem","Row","Helmet","Link","useNavigate","Store","CartPage","navigate","state","ctxDispatch","dispatch","cartItems","cart","updateCartHandler","item","quantity","get","_id","data","countInStock","window","alert","type","payload","removeItemHandler","checkoutHandler","subtotal","reduce","a","c","price","minHeight","length","map","slug","image","name","brand"],"sources":["/Users/notAdmin/Documents/dev/DarkRiver/frontend/src/screens/CartPage.js"],"sourcesContent":["import axios from \"axios\";\nimport { useContext,  } from \"react\";\nimport {\n  Button,\n  Card,\n  Col,\n  Container,\n  ListGroup,\n  ListGroupItem,\n  Row,\n} from \"react-bootstrap\";\nimport { Helmet } from \"react-helmet-async\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { Store } from \"../Store\";\n\n\nexport default function CartPage() {\n  const navigate = useNavigate();\n  const { state, dispatch: ctxDispatch } = useContext(Store);\n  const {\n    cart: { cartItems },\n  } = state;\n\n  const updateCartHandler = async (item, quantity) => {\n    const { data } = await axios.get(`/api/products/${item._id}`);\n    if (data.countInStock < quantity) {\n      window.alert(\"Sorry. Product is out of stock\");\n      return;\n    }\n    ctxDispatch({\n      type: \"CART_ADD_ITEM\",\n      payload: { ...item, quantity },\n    });\n  };\n  const removeItemHandler = (item) => {\n    ctxDispatch({ type: \"CART_REMOVE_ITEM\", payload: item });\n  };\n\n  const checkoutHandler = () => {\n    navigate(\"/login?redirect=/shipping\");\n  };\n\n  const subtotal = cartItems.reduce((a, c) => a + c.price * c.quantity, 0);\n\n  return (\n    <Container className=\"rounded-border-black-bg\">\n      <Helmet>\n        <title>Shopping Cart</title>\n      </Helmet>\n\n      <Row style={{ minHeight: \"400px\" }}>\n        <Col xl={8} className=\"black-bg\">\n          {cartItems.length === 0 ? (\n            <div className=\"col2\">\n              <div className=\"screen-500px-stack\">\n                <div className=\"cart-page-left-left-div\">\n                <img src=\"/images/shopNow.jpg\" className=\"shop-now-img\" alt=\"shop now\"></img>\n              </div>\n              <div className=\"cart-page-left-left-div\">\n                <h3>Your DarkRiver Cart is empty </h3> <br></br>\n                <Link to=\"/\" className=\"amzn-link \">\n                  Shop today's deal\n                </Link>\n              </div>\n              </div>\n              \n            </div>\n          ) : (\n            <>\n              <ListGroup className=\"black-bg\">\n                <Row>\n                  <Col xl={6}></Col>\n                  <Col xl={6}>\n                    {\" \"}\n                    <h1 className=\"cart-page-h1-txt\">Shopping Cart</h1>\n                  </Col>\n                </Row>\n\n                {cartItems.map((item) => (\n                  <ListGroup.Item className=\"black-bg\" key={item._id}>\n                    <Row className=\"align-items-center\">\n                      <Col xl={4} className=\"black-bg\">\n                        <Link to={`/dp/${item.slug}`}>\n                          {\" \"}\n                          <img\n                            src={item.image}\n                            alt={item.name}\n                            className=\"img-fluid rounded img-thumbnail\"\n                          ></img>\n                        </Link>\n                      </Col>\n                      <Col xl={5}>\n                        <Link\n                          to={`/product/${item.slug}`}\n                          className=\"normal-ass-white-txt\"\n                        ></Link>\n                        <div className=\"one-line-parent\">\n                          <p className=\"cart-page-txt\"> {item.name}</p>\n                          <p>\n                            <Link\n                              className=\"normal-ass-white-txt\"\n                              to={`/seller/${item.brand}`}\n                            >\n                              sold by <p className=\"amzn-link\">{item.brand}</p>\n                            </Link>\n                          </p>\n                          <p className=\"cart-page-txt\"> ${item.price}</p>\n                          <div className=\"one-line-child\">\n                            <Button\n                              onClick={() =>\n                                updateCartHandler(item, item.quantity - 1)\n                              }\n                              variant=\"dark\"\n                              disabled={item.quantity === 1}\n                            >\n                              <i className=\"fas fa-minus-circle\"></i>\n                            </Button>\n                            <span className=\"normal-ass-white-txt\">\n                              {item.quantity}\n                            </span>{\" \"}\n                            <Button\n                              variant=\"dark\"\n                              onClick={() =>\n                                updateCartHandler(item, item.quantity + 1)\n                              }\n                              disabled={item.quantity === item.countInStock}\n                            >\n                              <i className=\"fas fa-plus-circle\"></i>\n                            </Button>\n                          </div>\n                          <div className=\"one-line-child\">\n                            <Button\n                              onClick={() => removeItemHandler(item)}\n                              variant=\"black-bg-white-txt\"\n                            >\n                              Delete\n                            </Button>\n                          </div>\n                        </div>\n                      </Col>\n                    </Row>\n                  </ListGroup.Item>\n                ))}\n              </ListGroup>\n            </>\n          )}\n        </Col>\n        <Col xl={4}>\n          <Card className=\"black-bg\">\n            <Card.Body>\n              {cartItems.length === 0 ? (\n                <div></div>\n              ) : (\n                <ListGroup variant=\"flush\">\n                  <ListGroup.Item className=\"black-bg\">\n                    <br></br>\n                    <br></br>\n                    <h3>\n                      Subtotal ({cartItems.reduce((a, c) => a + c.quantity, 0)}{\" \"}\n                      items) : ${subtotal}\n                    </h3>\n                  </ListGroup.Item>\n                  <ListGroupItem className=\"black-bg\">\n                    {subtotal < 35 ? (\n                      <p>\n                        add ${35 - subtotal}\n                        &nbsp;of items to get free shipping\n                      </p>\n                    ) : (\n                      <p> &amp; free shipping</p>\n                    )}\n                  </ListGroupItem>\n                  <ListGroup.Item className=\"black-bg\">\n                    <div className=\"d-grid\">\n                      <Button\n                        type=\"button\"\n                        variant=\"yellow-black-txt\"\n                        onClick={checkoutHandler}\n                      >\n                        Proceed to Checkout\n                      </Button>\n                    </div>\n                  </ListGroup.Item>\n                </ListGroup>\n              )}\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}