{"ast":null,"code":"var _jsxFileName = \"/Users/notAdmin/Documents/rand/DarkRiver/frontend/src/screens/SearchResultsPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useReducer, useState } from 'react';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\nimport { getError } from '../utils';\nimport { Helmet } from 'react-helmet-async';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Rating from '../components/Rating';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport Button from 'react-bootstrap/Button';\nimport Product from '../components/Product';\nimport LinkContainer from 'react-router-bootstrap/LinkContainer';\nimport { Container } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'FETCH_REQUEST':\n      return { ...state,\n        loading: true\n      };\n\n    case 'FETCH_SUCCESS':\n      return { ...state,\n        products: action.payload.products,\n        page: action.payload.page,\n        pages: action.payload.pages,\n        countProducts: action.payload.countProducts,\n        loading: false\n      };\n\n    case 'FETCH_FAIL':\n      return { ...state,\n        loading: false,\n        error: action.payload\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst prices = [{\n  name: '$1 to $50',\n  value: '1-50'\n}, {\n  name: '$51 to $200',\n  value: '51-200'\n}, {\n  name: '$201 to $1000',\n  value: '201-1000'\n}];\nexport const ratings = [{\n  name: '4stars & up',\n  rating: 4\n}, {\n  name: '3stars & up',\n  rating: 3\n}, {\n  name: '2stars & up',\n  rating: 2\n}, {\n  name: '1stars & up',\n  rating: 1\n}];\nexport default function SearchResultsPage() {\n  _s();\n\n  const navigate = useNavigate();\n  const {\n    search\n  } = useLocation();\n  const sp = new URLSearchParams(search); // /search?category=Shirts\n\n  const category = sp.get('category') || 'all';\n  const query = sp.get('query') || 'all';\n  const price = sp.get('price') || 'all';\n  const rating = sp.get('rating') || 'all';\n  const order = sp.get('order') || 'newest';\n  const page = sp.get('page') || 1;\n  const [{\n    loading,\n    error,\n    products,\n    pages,\n    countProducts\n  }, dispatch] = useReducer(reducer, {\n    loading: true,\n    error: ''\n  });\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const {\n          data\n        } = await axios.get(`/api/products/search?page=${page}&query=${query}&category=${category}&price=${price}&rating=${rating}&order=${order}`);\n        dispatch({\n          type: 'FETCH_SUCCESS',\n          payload: data\n        });\n      } catch (err) {\n        dispatch({\n          type: 'FETCH_FAIL',\n          payload: getError(error)\n        });\n      }\n    };\n\n    fetchData();\n  }, [category, error, order, page, price, query, rating]);\n  const [categories, setCategories] = useState([]);\n  useEffect(() => {\n    const fetchCategories = async () => {\n      try {\n        const {\n          data\n        } = await axios.get(`/api/products/categories`);\n        setCategories(data);\n      } catch (err) {\n        toast.error(getError(err));\n      }\n    };\n\n    fetchCategories();\n  }, [dispatch]);\n\n  const getFilterUrl = filter => {\n    const filterPage = filter.page || page;\n    const filterCategory = filter.category || category;\n    const filterQuery = filter.query || query;\n    const filterRating = filter.rating || rating;\n    const filterPrice = filter.price || price;\n    const sortOrder = filter.order || order;\n    return `/search?category=${filterCategory}&query=${filterQuery}&price=${filterPrice}&rating=${filterRating}&order=${sortOrder}&page=${filterPage}`;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Search Products\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      fluid: true,\n      className: \"rounded-border-black-bg\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SearchResultsPage, \"3gEbKQKD2yamYvFkltQQMa2hqaM=\", false, function () {\n  return [useNavigate, useLocation];\n});\n\n_c = SearchResultsPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchResultsPage\");","map":{"version":3,"names":["React","useEffect","useReducer","useState","Link","useNavigate","useLocation","axios","toast","getError","Helmet","Row","Col","Rating","LoadingBox","MessageBox","Button","Product","LinkContainer","Container","reducer","state","action","type","loading","products","payload","page","pages","countProducts","error","prices","name","value","ratings","rating","SearchResultsPage","navigate","search","sp","URLSearchParams","category","get","query","price","order","dispatch","fetchData","data","err","categories","setCategories","fetchCategories","getFilterUrl","filter","filterPage","filterCategory","filterQuery","filterRating","filterPrice","sortOrder"],"sources":["/Users/notAdmin/Documents/rand/DarkRiver/frontend/src/screens/SearchResultsPage.js"],"sourcesContent":["import React, { useEffect, useReducer, useState } from 'react';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\nimport { getError } from '../utils';\nimport { Helmet } from 'react-helmet-async';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Rating from '../components/Rating';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport Button from 'react-bootstrap/Button';\nimport Product from '../components/Product';\nimport LinkContainer from 'react-router-bootstrap/LinkContainer';\nimport { Container } from 'react-bootstrap';\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'FETCH_REQUEST':\n      return { ...state, loading: true };\n    case 'FETCH_SUCCESS':\n      return {\n        ...state,\n        products: action.payload.products,\n        page: action.payload.page,\n        pages: action.payload.pages,\n        countProducts: action.payload.countProducts,\n        loading: false,\n      };\n    case 'FETCH_FAIL':\n      return { ...state, loading: false, error: action.payload };\n\n    default:\n      return state;\n  }\n};\n\nconst prices = [\n  {\n    name: '$1 to $50',\n    value: '1-50',\n  },\n  {\n    name: '$51 to $200',\n    value: '51-200',\n  },\n  {\n    name: '$201 to $1000',\n    value: '201-1000',\n  },\n];\n\nexport const ratings = [\n  {\n    name: '4stars & up',\n    rating: 4,\n  },\n\n  {\n    name: '3stars & up',\n    rating: 3,\n  },\n\n  {\n    name: '2stars & up',\n    rating: 2,\n  },\n\n  {\n    name: '1stars & up',\n    rating: 1,\n  },\n];\n\nexport default function SearchResultsPage() {\n  const navigate = useNavigate();\n  const { search } = useLocation();\n  const sp = new URLSearchParams(search); // /search?category=Shirts\n  const category = sp.get('category') || 'all';\n  const query = sp.get('query') || 'all';\n  const price = sp.get('price') || 'all';\n  const rating = sp.get('rating') || 'all';\n  const order = sp.get('order') || 'newest';\n  const page = sp.get('page') || 1;\n\n  const [{ loading, error, products, pages, countProducts }, dispatch] =\n    useReducer(reducer, {\n      loading: true,\n      error: '',\n    });\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const { data } = await axios.get(\n          `/api/products/search?page=${page}&query=${query}&category=${category}&price=${price}&rating=${rating}&order=${order}`\n        );\n        dispatch({ type: 'FETCH_SUCCESS', payload: data });\n      } catch (err) {\n        dispatch({\n          type: 'FETCH_FAIL',\n          payload: getError(error),\n        });\n      }\n    };\n    fetchData();\n  }, [category, error, order, page, price, query, rating]);\n\n  const [categories, setCategories] = useState([]);\n  useEffect(() => {\n    const fetchCategories = async () => {\n      try {\n        const { data } = await axios.get(`/api/products/categories`);\n        setCategories(data);\n      } catch (err) {\n        toast.error(getError(err));\n      }\n    };\n    fetchCategories();\n  }, [dispatch]);\n\n  const getFilterUrl = (filter) => {\n    const filterPage = filter.page || page;\n    const filterCategory = filter.category || category;\n    const filterQuery = filter.query || query;\n    const filterRating = filter.rating || rating;\n    const filterPrice = filter.price || price;\n    const sortOrder = filter.order || order;\n    return `/search?category=${filterCategory}&query=${filterQuery}&price=${filterPrice}&rating=${filterRating}&order=${sortOrder}&page=${filterPage}`;\n  };\n  return (\n    <div>\n      <Helmet>\n        <title>Search Products</title>\n      </Helmet>\n      <Container fluid className=\"rounded-border-black-bg\"></Container>\n  \n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}