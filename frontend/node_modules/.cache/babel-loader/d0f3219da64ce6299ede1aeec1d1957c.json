{"ast":null,"code":"import _asyncToGenerator from\"/Users/notAdmin/Documents/dev/DarkRiver/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/notAdmin/Documents/dev/DarkRiver/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/notAdmin/Documents/dev/DarkRiver/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/notAdmin/Documents/dev/DarkRiver/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useContext,useReducer,useState}from\"react\";import{Helmet}from\"react-helmet-async\";import Form from\"react-bootstrap/Form\";import Button from\"react-bootstrap/Button\";import{Store}from\"../Store\";import{getError}from\"../utils\";import axios from\"axios\";import{Container}from\"react-bootstrap\";import{toast}from\"react-toastify\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var reducer=function reducer(state,action){switch(action.type){case\"UPDATE_REQUEST\":return _objectSpread(_objectSpread({},state),{},{loadingUpdate:true});case\"UPDATE_SUCCESS\":return _objectSpread(_objectSpread({},state),{},{loadingUpdate:false});case\"UPDATE_FAIL\":return _objectSpread(_objectSpread({},state),{},{loadingUpdate:false});default:return state;}};export default function UserProfilePage(){var _useContext=useContext(Store),state=_useContext.state,ctxDispatch=_useContext.dispatch;var userInfo=state.userInfo;var _useState=useState(userInfo.name),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(userInfo.email),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),confirmPassword=_useState8[0],setConfirmPassword=_useState8[1];var _useReducer=useReducer(reducer,{loadingUpdate:false}),_useReducer2=_slicedToArray(_useReducer,2),loadingUpdate=_useReducer2[0].loadingUpdate,dispatch=_useReducer2[1];var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _yield$axios$put,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.put(\"/api/users/profile\",{name:name,email:email,password:password},{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 4:_yield$axios$put=_context.sent;data=_yield$axios$put.data;dispatch({type:\"UPDATE_SUCCESS\"});ctxDispatch({type:\"USER_SIGNIN\",payload:data});localStorage.setItem(\"userInfo\",JSON.stringify(data));alert.success(\"User updated successfully\");_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);dispatch({type:\"FETCH_FAIL\"});alert.error(getError(_context.t0));case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{fluid:true,className:\"max-width-800px\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"User Profile\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"shipping-menu\",children:[\" \",/*#__PURE__*/_jsx(\"h1\",{className:\"my-3\",children:\"User Profile\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{value:name,onChange:function onChange(e){return setName(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",onChange:function onChange(e){return setConfirmPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"center-contents\",children:[\" \",/*#__PURE__*/_jsx(Button,{variant:\"yellow-black-txt-wide\",type:\"submit\",children:\"Update\"})]})})]})]})]});}","map":{"version":3,"names":["React","useContext","useReducer","useState","Helmet","Form","Button","Store","getError","axios","Container","toast","reducer","state","action","type","loadingUpdate","UserProfilePage","ctxDispatch","dispatch","userInfo","name","setName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","submitHandler","e","preventDefault","put","headers","Authorization","token","data","payload","localStorage","setItem","JSON","stringify","alert","success","error","target","value"],"sources":["/Users/notAdmin/Documents/dev/DarkRiver/frontend/src/screens/UserProfilePage.js"],"sourcesContent":["import React, { useContext, useReducer, useState } from \"react\";\nimport { Helmet } from \"react-helmet-async\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport { Store } from \"../Store\";\nimport { getError } from \"../utils\";\nimport axios from \"axios\";\nimport { Container } from \"react-bootstrap\";\nimport { toast } from \"react-toastify\";\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"UPDATE_REQUEST\":\n      return { ...state, loadingUpdate: true };\n    case \"UPDATE_SUCCESS\":\n      return { ...state, loadingUpdate: false };\n    case \"UPDATE_FAIL\":\n      return { ...state, loadingUpdate: false };\n\n    default:\n      return state;\n  }\n};\n\nexport default function UserProfilePage() {\n  const { state, dispatch: ctxDispatch } = useContext(Store);\n  const { userInfo } = state;\n  const [name, setName] = useState(userInfo.name);\n  const [email, setEmail] = useState(userInfo.email);\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n\n  const [{ loadingUpdate }, dispatch] = useReducer(reducer, {\n    loadingUpdate: false,\n  });\n\n  const submitHandler = async (e) => {\n    e.preventDefault();\n    try {\n      const { data } = await axios.put(\n        \"/api/users/profile\",\n        {\n          name,\n          email,\n          password,\n        },\n        {\n          headers: { Authorization: `Bearer ${userInfo.token}` },\n        }\n      );\n      dispatch({\n        type: \"UPDATE_SUCCESS\",\n      });\n      ctxDispatch({ type: \"USER_SIGNIN\", payload: data });\n      localStorage.setItem(\"userInfo\", JSON.stringify(data));\n      alert.success(\"User updated successfully\");\n    } catch (err) {\n      dispatch({\n        type: \"FETCH_FAIL\",\n      });\n      alert.error(getError(err));\n    }\n  };\n\n  return (\n    <Container fluid className=\"max-width-800px\">\n      <Helmet>\n        <title>User Profile</title>\n      </Helmet>\n      <div className=\"shipping-menu\">\n        {\" \"}\n        <h1 className=\"my-3\">User Profile</h1>\n        <form onSubmit={submitHandler}>\n          <Form.Group className=\"mb-3\" controlId=\"name\">\n            <Form.Label>Name</Form.Label>\n            <Form.Control\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              required\n            />\n          </Form.Group>\n          <Form.Group className=\"mb-3\" controlId=\"name\">\n            <Form.Label>Email</Form.Label>\n            <Form.Control\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required\n            />\n          </Form.Group>\n          <Form.Group className=\"mb-3\" controlId=\"password\">\n            <Form.Label>Password</Form.Label>\n            <Form.Control\n              type=\"password\"\n              onChange={(e) => setPassword(e.target.value)}\n            />\n          </Form.Group>\n          <Form.Group className=\"mb-3\" controlId=\"password\">\n            <Form.Label>Confirm Password</Form.Label>\n            <Form.Control\n              type=\"password\"\n              onChange={(e) => setConfirmPassword(e.target.value)}\n            />\n          </Form.Group>\n          <div className=\"mb-3\">\n            <div className=\"center-contents\">\n              {\" \"}\n              <Button variant=\"yellow-black-txt-wide\" type=\"submit\">\n                Update\n              </Button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </Container>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}